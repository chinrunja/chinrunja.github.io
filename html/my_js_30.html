<!DOCTYPE html>
<html lang="zh-CN">
<head>

	<title>My JavaScript30</title>
	<link rel="stylesheet" type="text/css" href="../css/my_js_30.css">
	<link rel="stylesheet" type="text/css" href="../css/modules/prism.css">

</head>
<body>

	<h1>我的JavaScript30小记</h1>
	<h2>感谢<a href="https://soyaine.github.io/JavaScript30/">未枝丫</a>的JavaScript30中文指南</h2>
	<hr>
	<p>我的其他网页<a href="js_funlibs.html">JavaScript Funlibs--记录常用函数（方法）</a></p>
	<hr>
	<h2 id="索引">索引</h2>
	<ol>
		<li><a href="#JavaScript Drum Kit">第一天： JavaScript Drum Kit</a></li>
	</ol>
	<hr>

	<!-- 2021-03-31 updated -->

	<h2 id="JavaScript Drum Kit">第一天： JavaScript Drum Kit</h2>
	<p>查看我的<a href="../js30/day_01/index-START.html">完成示例</a></p>
	<h3>解决过程</h3>
	<ol>
		<li>在MDN搜索关于<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/keydown_event">keydown相关参考及示例</a>
			<ul>
				<li>模仿示例</li>
			</ul>
		</li>
		<li>添加事件处理程序
			<ol>
				<li>在<a href="http://keycode.info/"></a>可获取键码,添加至HTML的data-key 中（模版其实已给出keycode）</li>
				<li>用 `querySelector` 获取元素，获取 `data-key` 为对应键码的元素（指南已给出用法）</li>
				<li>播放音频、添加样式（指南已给出用法）</li>
			</ol>
		</li>
		<li>为所有的 `div.key` 添加 `transitionened` 事件,搜索MDN的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/transitionend_event">transitionend相关参考及示例</a>,使用forEach为每个key添加事件监听，去除样式的事件处理程序（指南未给出，需自行查找使用）
		</li>
		<li>完成后如下（需添加至HTML的&lt;script&gt;标签内）：
			<pre><code class="language-javascript">
	// 此处window可改成document
	window.addEventListener('keydown', event => {
	// 以下两个const声明、声音播放、添加playing类等来自指南
    const key = document.querySelector(`div[data-key="${event.keyCode}"]`);
    const audio = document.querySelector(`audio[data-key="${event.keyCode}"]`);

    // 播放音频
    audio.currentTime = 0;
    audio.play();

    // 添加样式，需查看CSS文件获取类名
    key.classList.add("playing");

    // console.log(key, audio); // 检测是否获取到key,audio元素
    })

    // 移除类名取消样式
    function remove() {
      event.target.classList.remove('playing');
    }

    const keys = document.querySelectorAll('.key');

    // console.log(keys); // 检查是否获取到key元素

    // 为所有key添加transitionend事件处理
    keys.forEach(e => {
      e.addEventListener("transitionend", remove, false);
    })
			</code></pre>
		</li>
	</ol>


	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>减少不必要的注释</li>
		<li>网页美化</li>
	</ol>
	<label>更新于 <em>timestamp: 1617199831615</em> __chinrunja</label>
	<hr>

	<script src="../script/modules/prism.js" type="text/javascript"></script>

</body>
</html>