<!DOCTYPE html>
<html lang="zh-CN">
<head>

	<title>My JavaScript30</title>
	<link rel="stylesheet" type="text/css" href="../css/my_js_30.css">
	<link rel="stylesheet" type="text/css" href="../css/modules/prism.css">

</head>
<body>

	<h1>我的JavaScript30小记</h1>
	<h2>感谢<a href="https://soyaine.github.io/JavaScript30/">未枝丫</a>的JavaScript30中文指南</h2>
	<hr>
	<p>我的其他网页</p>
	<span><a href="js_funlibs.html">(1) JavaScript Funlibs--记录常用函数（方法） </a></span><span><a href="my_codewars.html">(2) Codewars--JavaScript答题记录 </a></span>
	<hr>
	<h2 id="索引">索引</h2>
	<ol>
		<li><a href="#JavaScript Drum Kit">第一天： JavaScript Drum Kit</a></li>
		<li><a href="#JS + CSS Clock">第二天： JS + CSS Clock</a></li>
		<li><a href="#Scoped CSS Variables and JS">第三天： Scoped CSS Variables and JS</a></li>
		<li><a href="#Array Cardio 💪">第四天： Array Cardio 💪</a></li>
		<li><a href="#Flex Panels 💪">第五天： Flex Panels 💪</a></li>
		<li><a href="#Type Ahead 👀">第六天： Type Ahead 👀--待返工</a></li>
		
	</ol>
	<hr>

	<div class="fixed"><a class="index" href="#索引">回到索引</a></div>

	<!-- 2021-03-31 updated -->

	<h2 id="JavaScript Drum Kit">第一天： JavaScript Drum Kit</h2>
	<p>查看我的<a href="../js30/day_01/index-START.html">完成示例</a></p>
	<h3>解决过程</h3>
	<ol>
		<li>在MDN搜索关于<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/keydown_event">keydown相关参考及示例</a>
			<ul>
				<li>模仿示例</li>
			</ul>
		</li>
		<li>添加事件处理程序
			<ol>
				<li>在<a href="http://keycode.info/"></a>可获取键码,添加至HTML的data-key 中（模版其实已给出keycode）</li>
				<li>用 `querySelector` 获取元素，获取 `data-key` 为对应键码的元素（指南已给出用法）</li>
				<li>播放音频、添加样式（指南已给出用法）</li>
			</ol>
		</li>
		<li>为所有的 `div.key` 添加 `transitionened` 事件,搜索MDN的<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/transitionend_event">transitionend相关参考及示例</a>,使用forEach为每个key添加事件监听，去除样式的事件处理程序（指南未给出，需自行查找使用）
		</li>
		<li>完成后如下（需添加至HTML的&lt;script&gt;标签内）：
			<pre><code class="language-javascript">
	// 此处window可改成document
	window.addEventListener('keydown', event => {
	// 以下两个const声明、声音播放、添加playing类等来自指南
    const key = document.querySelector(`div[data-key="${event.keyCode}"]`);
    const audio = document.querySelector(`audio[data-key="${event.keyCode}"]`);

    // 播放音频
    audio.currentTime = 0;
    audio.play();

    // 添加样式，需查看CSS文件获取类名
    key.classList.add("playing");

    // console.log(key, audio); // 检测是否获取到key,audio元素
    })

    // 移除类名取消样式
    function remove() {
      event.target.classList.remove('playing');
    }

    const keys = document.querySelectorAll('.key');

    // console.log(keys); // 检查是否获取到key元素

    // 为所有key添加transitionend事件处理
    keys.forEach(e => {
      e.addEventListener("transitionend", remove, false);
    })
			</code></pre>
		</li>
	</ol>


	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>减少不必要的注释</li>
		<li>网页美化</li>
	</ol>
	<label>更新于 <em>timestamp: 1617199831615</em> __chinrunja</label>
	<hr>

	<!-- 2021-04-01 updated -->

	<h2 id="JS + CSS Clock">第二天： JS + CSS Clock</h2>
	<p>查看我的<a href="../js30/day_02/index-START.html">完成示例</a></p>
	<h3>解决过程</h3>
	<ol>
		<li>CSS 部分
			<ol>
				<li>调整指针的初始位置以及旋转的轴点，搜索MDN的<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin">transfrom-origin相关参考及示例</a></li>
				<li>调整时钟指针跳动时的过渡效果（指南已提供CSS样式）</li>
				<li>用伪元素给表盘添加一个中心点（指南已提供CSS样式）</li>
			</ol>
		</li>
		<li>JS 部分
			<ol>
				<li>利用定时器自动更新时间（指南已给出示例）</li>
				<li>获取三个指针对应的 HTML 元素，留待后续操作,使用document.querySelector选择指针的类即可（注意还需要在&lt;style&gt;中自行添加.hour-hand/.min-hand/.sec-hand类及样式）</li>
				<li>编写setDate的方法
					<ol>
						<li>new Date()并获取时分秒,使用date.getHours()/getMinutes()/getSeconds()</li>
						<li>通过当前时分秒计算指针所处角度（指南已给出计算方法）</li>
						<li>将角度值赋值给CSS中相应的指针，element.style.transform = `rotate(${xxxDeg}deg)`;</li>
					</ol>
				</li>
			</ol>
		</li>
		<li>完成如下（代码清晰易懂，就不注释了）：
	<pre><code class="language-css">
	/* CSS 部分 */
	.hour-hand {
      height:6px;
      background:blue;

      margin-top: -height/2;
    }

    .min-hand {
      height:3px;
      background:green;

      margin-top: -height/2;
    }

    .second-hand {
      height:1px;
      background:red;

      margin-top: -height/2;
      transition: all 1s;

    }

    .clock-face::after {
      width: .8em;
      height: .8em;
      left: 50%;
      top: 50%;
      position: absolute;
      display: block;
      transform: translate(-50%, -50%);
      content: '';
      background-color: #a8c5d1;
      border-radius: 50%;
      box-shadow:
        0 0 0 2px rgba(0,0,0,0.1),
        0 0 10px rgba(0,0,0,0.2);
    }

    h1 {
      text-align: center;
    }
	</code></pre>
	<pre><code class="language-javascript">
	// JS 部分
	setInterval(setDate, 1000);

    const hourHand = document.querySelector('.hour-hand');
    const minHand = document.querySelector('.min-hand');
    const secHand = document.querySelector('.second-hand');
    const time = document.getElementsByTagName('h1')[0];

    function setDate() {
      let date = new Date(),
          hour = date.getHours(),
          minute = date.getMinutes(),
          second = date.getSeconds();

      const hourDeg = (90 + (hour / 12) * 360 + (minute / 12 / 60) * 360);
      const minDeg = 90 + (minute / 60) * 360;
      const secDeg = 90 + (second / 60) * 360;

      if (secDeg === 90) secHand.style.transition = 'all 0s';
      else secHand.style.transition = 'all 0.05s';

      if (minDeg === 90) minHand.style.transition = 'all 0s';
      else minHand.style.transition = 'all 0.1s';

      hourHand.style.transform = `rotate(${hourDeg}deg)`;
      minHand.style.transform = `rotate(${minDeg}deg)`;
      secHand.style.transform = `rotate(${secDeg}deg)`;

      time.textContent = `${('0' + hour).slice(-2)}:${('0'+ minute).slice(-2)}:${('0' + second).slice(-2)}`;
	</code></pre>
		</li>
	</ol>

	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>网页美化</li>
	</ol>
	<label>更新于 <em>timestamp: 1617288509615</em> __chinrunja</label>
	<hr>

	<!-- 2021-04-02 updated -->

	<h2 id="Scoped CSS Variables and JS">第三天： Scoped CSS Variables and JS</h2>
	<p>查看我的<a href="../js30/day_03/index-START.html">完成示例</a></p>
	<h3>解决过程(用自己的笨方法，两个多小时才弄出来)</h3>
	<ol>
		<li>CSS 部分
			<ol>
				<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/:root">:root</a>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_variables">var(--xxx)</a>都没用过看MDN还是很容易上手的。（用的时候有参考指南的使用方法）</li>
				<li>在style便签加入img的CSS样式，使用CSS变量值</li>
				<li>img的背景色用的是background, 不是backbround-color,参考了完成的代码才知道，是用于改变spacing颜色的</li>
				<li><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter-function/blur()">filter: blur()</a>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/change_event">change</a>都可以在MDN上找到用法</li>
			</ol>
		</li>
		<li>JS 部分
			<ol>
				<li>添加监听事件我起初用的oninput,后面发现虽然值有改变，但没应用在元素上，然后改成了onchange，手动一个一个加的监听</li>
				<li>没有使用鼠标监听事件</li>
				<li>没有使用forEach给快速给所有元素加监听，因为要给不同input设定不同值，索性就都分开来了</li>
			</ol>
		</li>
		<li>
	<pre><code class="language-css">
	/* CSS 部分 */
	:root {
      --spacing: 12px;
      --blur: 12px;
      --base: #ffc600;
    }

    .hl {
      color: var(--base);
    }

    img {
      padding: var(--spacing);
      background: var(--base);
      filter: blur(var(--blur));
    }
	</code></pre>
	<pre><code class="language-javascript">
	// JS 部分
	const inputElem = document.getElementsByTagName('input');

    inputElem[0].onchange = function() {
      document.documentElement.style.setProperty('--spacing', inputElem[0].value + 'px');
    }
    inputElem[1].onchange = function() {
      document.documentElement.style.setProperty('--blur', inputElem[1].value + 'px');
    }
    inputElem[2].onchange = function() {
      document.documentElement.style.setProperty('--base', inputElem[2].value);
    }
	</code></pre>
		</li>
	</ol>

	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>网页美化</li>
		<li>晚上23点多完成，更新网页后过了0点，清明假期开始了</li>
	</ol>
	<label>更新于 <em>timestamp: 1617380373597</em> __chinrunja</label>
	<hr>

	<!-- 2021-04-03 updated -->

	<h2 id="Array Cardio 💪">第四天： Array Cardio 💪</h2>
	<p>查看我的<a href="../js30/day_04/index-START.html">完成示例</a>，有附上代码和终端打印效果</p>
	<h3>今天的示例主要是数组方法的使用，都挺简单的</h3>

	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>网页美化</li>
	</ol>
	<label>更新于 <em>timestamp: 1617459964539</em> __chinrunja</label>
	<hr>

	<!-- 2021-04-04 updated -->

	<h2 id="Flex Panels 💪">第五天： Flex Panels 💪</h2>
	<p>查看我的<a href="../js30/day_05/index-START.html">完成示例</a></p>
	<p>今天的示例跟第一天的很像，当然这里说的是JavaScript的用法，CSS的话对我来说还是比较难</p>
	<h3>解决过程跟第一天类似</h3>
	<ul>
		<li>CSS 部分
			<ol>
				<li>将 .panels 设置为 display:flex, flex-direction: row;</li>
				<li>将 .panel，设为 `display:flex, flex: 1, flex-direction: row;</li>
			</ol>
		</li>
		<li>JS 部分
			<ol>
				<li>获取所有类名为 panel 的元素</li>
				<li>使用forEach添加click事件侦听，增加.open类以实现效果</li>
				<li>同样使用forEach添加transitionend事件侦听，然后移除.open类，移除效果</li>
				<li>模版.cta类此处我没使用</li>
			</ol>
		</li>
		<li>JS代码如下：
	<pre><code class="language-javascript">
	// JS 部分
	const panels = document.querySelectorAll('.panel');

    panels.forEach((panel) => panel.onclick = function() {
      this.classList.add('open');
    });

    panels.forEach((panel) => panel.addEventListener("transitionend", recover, false));

    function recover() {
      this.classList.remove('open');
    }
	</code></pre>
		</li>
	</ul>

	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>网页美化</li>
		<li>不只是用JS完成效果，CSS也好好深入了解一下</li>
	</ol>
	<label>更新于 <em>timestamp: 1617534496901</em> __chinrunja</label>
	<hr>

	<!-- 2021-04-05 updated -->

	<h2 id="Type Ahead 👀">第六天： Type Ahead 👀--待返工</h2>
	<p><a href="../js30/day_04/index-START.html">示例</a></p>
	<h3>今天的示例涉及fetch(),async,RegExp()，对萌新的我来说难度有点高，我把JS代码搬过来了，改天再回来返工</h3>
	<pre><code class="language-javascript">
	// JS 部分
	const endpoint = 'https://gist.githubusercontent.com/soyaine/81399bb2b24ca1bb5313e1985533c640/raw/bdf7df2cbcf70706c4a5e51a7dfb8c933ed78878/TangPoetry.json';

  	const poetrys = [];
  	fetch(endpoint)
    	.then(blob => blob.json())
    	.then(data => poetrys.push(...data));

  	function findMatches(wordToMatch, poetrys) {
    	return poetrys.filter(poet => {
      		// 正则找出匹配的诗句
      		const regex = new RegExp(wordToMatch, 'gi');
      		const author = poet.detail_author.join('');
      		return poet.detail_text.match(regex) || poet.title.match(regex) || author.match(regex);
    	});
  	}

  	function displayMatches() {
    	const matches = findMatches(this.value, poetrys);
    	const regex = new RegExp(this.value, 'gi');
    	const html = matches.map(poet => {
      	// 替换高亮的标签
      	const text = poet.detail_text.replace(regex, `&lt;span class="hl"&gt;${ this.value }&lt;/span&gt;`);
      	const title = poet.title.replace(regex, `&lt;span class="hl"&gt;${ this.value }&lt;/span&gt;`)
      	// 构造 HTML 值
      	return `
      	&lt;li&gt;
        	&lt;span class="poet"&gt;${ text }&lt;/span&gt;
        	&lt;span class="title"&gt;${ title } - ${ poet.detail_author[0] }&lt;/span&gt;
      	&lt;/li&gt;
      	`;
    	}).join('');
    	suggestions.innerHTML = html;
  	}

  	const search = document.querySelector('.search');
  	const suggestions = document.querySelector('.suggestions');

  	search.addEventListener('change', displayMatches);
  	search.addEventListener('keyup', displayMatches);
	</code></pre>

	<h3>ToDo & Thought</h3>
	<ol>
		<li>每天完成一个项目示例</li>
		<li>网页美化</li>
		<li>不只是用JS完成效果，CSS也好好深入了解一下</li>
	</ol>
	<label>更新于 <em>timestamp: 1617626178167</em> __chinrunja</label>
	<hr>

	<script src="../script/modules/prism.js" type="text/javascript"></script>

</body>
</html>